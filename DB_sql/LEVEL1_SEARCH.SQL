--NOLGOS LIKE 검색: 검색 대상 필드 - 서브카테고리, 메뉴, 가격, 관련정보, 이름, 상세내용, 휴무일, 편의시설
SELECT NO,NAME,ADDRESS,RELINFO,PICTURES,OFF_DAY OFFDAY,OPEN_TIME OPENTIME,CLOSE_TIME CLOSETIME,STAY_TIME STAYTIME,PHONE,MIN_BUDGET MINBUDGET,MAX_BUDGET MAXBUDGET,LAT,LNG,CONTENT,AVG_SCORE AVGSCORE,REVIEW_CNT REVIEWCNT,RATING_CNT RATINGCNT,REGDATE,CATEGORY_NO CATEGORYNO,LOCATION_NO LOCATIONNO,USER_NO USERNO,OWNER_NO OWNERNO,
(SELECT COUNT(*) FROM LIKINGS WHERE USER_NO=#{loginUserNo} AND CONTENT_NO=NOLGOS.NO AND TYPE='N') ISGOCHECK,
(SELECT COUNT(*) FROM LIKINGS WHERE CONTENT_NO=NOLGOS.NO AND TYPE='N') GOCNT
FROM NOLGOS WHERE NO IN(
    SELECT DISTINCT NO FROM NOLGOS N,
    (SELECT NOLGO_NO N_NO, PRICE, NAME FROM MENUES) M,
    (SELECT NOLGO_NO N_NO, C.NAME C_NAME FROM NOLGO_CONVENIENTS N_C, CONVENIENTS C WHERE N_C.CONVENIENT_NO = C.NO) C,
    (SELECT SUB.NOLGO_NO N_NO, T.CONTENT CONTENT FROM SUB_CATEGORIES SUB, TAGS T WHERE SUB.TAG_NO = T.NO) S WHERE N.NO = M.N_NO(+) AND N.NO = S.N_NO(+) AND N.NO = C.N_NO(+) AND(
        S.CONTENT LIKE '%'||#{keyword}||'%' OR
        C.C_NAME LIKE '%'||#{keyword}||'%' OR
        M.PRICE LIKE '%'||#{keyword}||'%' OR
        M.NAME LIKE '%'||#{keyword}||'%' OR
        RELINFO LIKE '%'||#{keyword}||'%' OR
        N.NAME LIKE '%'||#{keyword}||'%' OR
        N.CONTENT LIKE '%'||#{keyword}||'%' OR
        N.OFF_DAY LIKE '%'||#{keyword}||'%' 

    )
);

--USERS LIKE 검색: 검색 대상필드 - 닉네임, 소갯말, 관심지역, 관심사, 등록태그
SELECT NO,EMAIL,PASSWORD,NICKNAME,BIRTHDATE,PHONE,GENDER,INTRODUCE,PROFILE,COVER,IS_CONFIRM ISCONFIRM,ROLE,FOLLOWER_CNT FOLLOWERCNT,FOLLOWING_CNT FOLLOWINGCNT,REGDATE
FROM USERS WHERE NO IN(
    SELECT DISTINCT NO FROM USERS U,
    (SELECT USER_NO U_NO, CONTENT T_CONT FROM TAGS) T,
    (SELECT C.NAME IC_NAME, USER_NO U_NO FROM INTEREST_CATEGORIES IC, CATEGORIES C WHERE CATEGORY_NO = C.NO) IC,
    (SELECT L.DEPTH1 || ' ' || L.DEPTH2 || ' ' || L.DEPTH3 LOC, IL.USER_NO U_NO FROM INTEREST_LOCATIONS IL, LOCATIONS L WHERE IL.LOCATION_NO = L.NO) IL WHERE U.NO = T.U_NO(+) AND U.NO = IC.U_NO(+) AND U.NO = IL.U_NO(+) AND(
        NICKNAME LIKE '%' || #{keyword} || '%'
        OR INTRODUCE LIKE '%' || #{keyword} || '%'
        OR T_CONT LIKE '%' || #{keyword} || '%'
        OR IC.IC_NAME LIKE '%' || #{keyword} || '%'
        OR IL.LOC LIKE '%' || #{keyword} || '%'
    )
);

--REVIEW LIKE 검색 : 검색 대상 필드 - 제목, 내용
SELECT NO,TITLE,CONTENT,LIKE_CNT LIKECNT,REGDATE,USER_NO USERNO,NOLGO_NO NOLGONO
FROM 
REVIEWS R,
(SELECT CONTENT T_CONTENT, CONTENT_NO FROM TAGS WHERE TYPE='V') T 
WHERE 
	R.NO = T.CONTENT_NO(+)
	AND
	(
	TITLE LIKE '%' || #{keyword} || '%'
	OR
	CONTENT LIKE '%' || #{keyword} || '%'
    OR
    T_CONTENT LIKE '%' || #{keyword} || '%'
	)
;
